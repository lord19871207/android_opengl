#version 300 es

uniform sampler2D sTexture;

//uniform float uApertureDiameter;
//uniform float uFocalLength;
//uniform float uPlaneInFocus;
//uniform float uSensorHeight;

uniform float uCamera1;
uniform float uCamera2;

in vec2 vTexPosition;

layout (location = 0) out vec4 outFragColor;
layout (location = 1) out vec4 outCoC;

void main() {
    vec4 color = texture(sTexture, vTexPosition);

    float coc = (uCamera1 / color.a) - uCamera2;
    vec2 coc2 = vec2(-coc, coc);
    coc2 = clamp(coc2, 0.0, 1.0);

    outFragColor = vec4(color.rgb, coc2.x);
    outCoC = vec4(coc2, 0.0, 0.0);
}
